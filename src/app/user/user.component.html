<div class="panel-header panel-header-sm">
</div>
<div class="main-content">
  <div class="row">
    <div class="col-md-8" style="padding-bottom:20px;">
      <div class="card"style="height:100%;">
        <div class="card-header">
          <h5 class="title">Моя страница</h5>
        </div>
        <div class="card-body">
          <form>
            <div class="row">
              <div class="col-md-12">
                <div class="form-group">
                  <label>ФИО </label>
                  <input type="text" class="form-control" placeholder="Иванов Иван Иванович" name="name1" [(ngModel)]="name1" value="{{user.name}}">
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6 pr-1">
                <div class="form-group">
                  <label for="email">Email </label>
                  <input name="email" id="email" type="email" class="form-control" placeholder="name@mail.ru" name="email1" [(ngModel)]="email1" value="{{user.email}}">
                </div>
              </div>
              <div class="col-md-6 pl-1">
                <div class="form-group">
                  <label>Номер телефона</label>
                  <input type="text" class="form-control" placeholder="88005553535" name="phone" [(ngModel)]="phone" value="{{user.phone}}">
                </div>
              </div>
            </div>
            <div class="row" style="text-align: center">
              <div class="col-md-6 pl-1">
                <button class="btn btn-neutral btn-lg" (click)="changeProfile(name1, email1, phone)">Изменить данные</button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card card-user">
        <div class="image">
          <img src="../assets/img/bg5.jpg" alt="...">
        </div>
        <div class="card-body">
          <div class="author">
            <a href="#">
              <img class="avatar border-gray" src="../assets/img/mike.jpg" alt="...">
              <h5 class="title">{{user.email}}</h5>
            </a>
            <p class="description">
              Рейтинг: {{user.rating}}
            </p>
          </div>
          <p class="description text-center">
            "Что-то"
          </p>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6" style="padding-bottom:20px;">
      <div class="card" style="height:100%;">
        <div class="card-header">
          <h5 class="title">Мои организации</h5>
        </div>
        <div class="card-body">
          <div class="table-responsive no-scroll">
            <table class="table">
              <tr *ngFor="let org of organizations">
                <td>
                  <div (click)="navigate( org.id )">Название: {{org.name}}</div><br>
                  <div>Рейтинг: {{org.rating}}</div><br>
                  <div>Адрес: {{org.address}}</div><br>
                  <div>Описание: {{org.description}}</div><br>
                </td>
              </tr>
            </table>
            <div class="row">
              <button type="button" rel="tooltip" title="На предыдущую" (click)="changePage(-1, 'orgPage')" class="btn btn-info btn-round btn-icon btn-icon-mini btn-neutral">
                <i class="now-ui-icons arrows-1_minimal-left"></i>
              </button>
              <div class="form-check btn btn-info btn-round btn-icon btn-icon-mini btn-neutral" *ngFor="let index of createRange(orgPagesCount)">
                <input *ngIf="index - 1 == selectedOrgPage" class="form-control" type="button" value="{{index}}" (click)="goToPage(index, 'orgPage')" style="border-color:#fd7e14">
                <input *ngIf="index - 1 != selectedOrgPage" class="form-control" type="button" value="{{index}}" (click)="goToPage(index, 'orgPage')">
              </div>
              <button type="button" rel="tooltip" title="На следующую" (click)="changePage(1, 'orgPage')" class="btn btn-info btn-round btn-icon btn-icon-mini btn-neutral">
                <i class="now-ui-icons arrows-1_minimal-right"></i>
              </button>
            </div>
            <button class="btn btn-neutral btn-lg" (click)="navigate('-1')">Добавить организацию</button>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="card  card-tasks">
        <div class="card-header ">
          <h4 class="card-title">Мои записи</h4>
        </div>
        <div class="card-body ">
          <div class="table-full-width table-responsive">
            <table class="table">
              <tbody>
              <tr *ngFor="let res of reservations">
                <ng-container *ngIf="res.rating == 0 && res.comment == ''">
                <td>
                  <div class="form-check">
                    <input  class="form-control" name="{{res.id}}" type="text"  [(ngModel)]="rating" placeholder="5.0">
                  </div>
                </td>
                <td class="text-left">
                  <label>Название организации: {{res.service.organization.name}}</label><br>
                  <label>Название услуги: {{res.service.name}}</label><br>
                  <label>Цена: {{res.service.price}} р.</label><br>
                  <label>Отзыв:</label>
                  <textarea rows="4" cols="60" class="form-control" name="{{res.id}}" [(ngModel)]="comment" placeholder="Мой отзыв...{{res.id}}"></textarea>
                </td>
                <td class="td-actions text-right">
                  <button type="button" rel="tooltip" title="Изменить" (click)="updateRez(res.id, res.service.id, comment, rating)" class="btn btn-info btn-round btn-icon btn-icon-mini btn-neutral">
                    <i class="now-ui-icons ui-1_check"></i>
                  </button>
                </td>
                </ng-container>
                <ng-container *ngIf="res.rating != 0 && res.comment != ''">
                  <td>
                    <div class="form-check">
                      <input class="form-control" type="text" value="{{res.rating}}">
                    </div>
                  </td>
                  <td class="text-left">
                      <label>Название организации: {{res.service.organization.name}}</label><br>
                      <label>Название услуги: {{res.service.name}}</label><br>
                      <label>Цена: {{res.service.price}} р.</label><br>
                      <label>Отзыв</label>
                      <textarea rows="4" cols="60" class="form-control">{{res.comment}}</textarea>
                  </td>
                </ng-container>
              </tr>
              </tbody>
            </table>
            <div class="row">
              <button type="button" rel="tooltip" title="На предыдущую" (click)="changePage(-1, 'resPage')" class="btn btn-info btn-round btn-icon btn-icon-mini btn-neutral">
                <i class="now-ui-icons arrows-1_minimal-left"></i>
              </button>
              <div class="form-check btn btn-info btn-round btn-icon btn-icon-mini btn-neutral" *ngFor="let index of createRange(resPagesCount)">
                <input *ngIf="index - 1 == selectedResPage" class="form-control" type="button" value="{{index}}" (click)="goToPage(index, 'resPage')" style="border-color:#fd7e14">
                <input *ngIf="index - 1 != selectedResPage" class="form-control" type="button" value="{{index}}" (click)="goToPage(index, 'resPage')">
              </div>
              <button type="button" rel="tooltip" title="На следующую" (click)="changePage(1, 'resPage')" class="btn btn-info btn-round btn-icon btn-icon-mini btn-neutral">
                <i class="now-ui-icons arrows-1_minimal-right"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

